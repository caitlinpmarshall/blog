var sowbForms=window.sowbForms||{};sowbForms.setupVcWidgetForm=function(){var e,o=jQuery,n=o('[name="so_widget_class"]'),i=o(".siteorigin_widget_form_container"),t=!1;i.on("change",".siteorigin-widget-field",(function(){t=!0;var e=sowbForms.getWidgetFormValues(i),r=n.val(),s=JSON.stringify({widget_class:r,widget_data:e});s=s.replace(/\\/g,"\\\\"),o('[name="so_widget_data"]').val(s)})),n.on("mousedown",(function(){e=n.find("option:selected")})),n.on("change",(function(r){if(!t||confirm(soWidgetsVC.confirmChangeWidget)){t=!1;var s={action:"sowb_vc_widget_render_form",widget:n.val()};o.post(soWidgetsVC.ajaxUrl,s,(function(e){i.html(e),i.trigger("change")}),"html")}else e.attr("selected",!0)})),vc.atts.sowb_json_escaped={parse:function(e){var o=this.content().find(".wpb_vc_param_value[name="+e.param_name+"]");return _.escape(_.escape(o.val().toString()).replace(/\[/g,"&#91;").replace(/\]/g,"&#93;"))},render:function(e,o){return _.unescape(_.unescape(o)).replace(/&#91;/g,"[").replace(/&#93;/g,"]")}},vc.events.on("shortcodeView:updated:siteorigin_widget_vc",(function(){void 0!==vc.frame_window&&void 0!==vc.frame_window.sowb&&(0,vc.frame_window.jQuery)(vc.frame_window.sowb).trigger("setup_widgets",{preview:!0})}))},jQuery((function(e){sowbForms.setupVcWidgetForm()})),window.sowbForms=sowbForms;