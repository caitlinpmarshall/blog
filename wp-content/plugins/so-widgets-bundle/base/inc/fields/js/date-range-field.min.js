!function(e){e(document).on("sowsetupformfield",".siteorigin-widget-field-type-date-range",(function(t){var i=e(this),n=i.find('input[type="hidden"][class="siteorigin-widget-input"]');if(!i.data("initialized")){if(i.find('[class*="sowb-specific-date"]').length>0){var a=function(e,t){var a=i.find("."+e+"-picker"),r=function(e,t){if(!isNaN(e.valueOf())){var i=e.getDate();i=i<10?"0"+i.toString():i.toString();var n=e.getMonth()+1;return n=n<10?"0"+n.toString():n.toString(),e.getFullYear()+"-"+n+"-"+i}return""},l=function(e,t){var i=e.split("-"),n=parseInt(i[2]),a=parseInt(i[1])-1,r=parseInt(i[0]);return new Date(r,a,n)},s=function(t){var i=""===n.val()?{}:JSON.parse(n.val());i[e]=r(t),a.val(i[e]),n.val(JSON.stringify(i)),n.trigger("change",{silent:!0})},f=new Pikaday({field:a[0],blurFieldOnSelect:!1,toString:r,parse:l,onSelect:s});return a.on("change",(function(e){var t=l(a.val());return s(t),e.preventDefault(),!1})),t&&a.val(t),f}.bind(this),r=""===n.val()?{after:"",before:""}:JSON.parse(n.val()),l=a("after",r.after),s=a("before",r.before);n.on("change",(function(e,t){if(!t||!t.silent){var i=""===n.val()?{after:"",before:""}:JSON.parse(n.val());l.setDate(i.after),s.setDate(i.before)}}))}else i.find(".sowb-relative-date").length>0&&i.find(".sowb-relative-date").each((function(){var t=e(this).data("name");e(this).on("change",function(){var i=""===n.val()?{}:JSON.parse(n.val());i.hasOwnProperty(t)||(i[t]={}),i[t].value=e(this).find("> input").val(),i[t].unit=e(this).find("> select").val(),n.val(JSON.stringify(i)),n.trigger("change",{silent:!0})}.bind(this)),n.on("change",function(i,a){if(!a||!a.silent){var r=""===n.val()?{from:{},to:{}}:JSON.parse(n.val());r.hasOwnProperty(t)&&(e(this).find("> input").val(r[t].value),e(this).find("> select").val(r[t].unit))}}.bind(this))}));i.data("initialized",!0)}}))}(jQuery);